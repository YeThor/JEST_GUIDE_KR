# Setup and Teardown

> 사전 작업 및 후속 작업 일괄처리하기

테스트를 실행하기 전에 종종 사전 작업을 해야할 경우가 종종 있습니다. 테스트가 종료된 후 후속 작업을 해야할 때도 있죠. Jest 는 이러한 경우도 손쉽게 처리할 수 있도록 다음의 기능들을 제공해줍니다.

## Repeating Setup For Many Tests

> 반복적인 사전 작업 수행

만약 여러 테스트 코드에 대해 반복적으로 해야하는 중복된 작업들이 있다면, `beforeEach`와 `afterEach`를 쓸 수 있습니다.

예를 들어, 여러 개의 테스트가 도시에 대한 정보를 담은 데이터베이스를 다룬다고 해봅시다. 이 데이터들을 다루기 위해, 각각의 테스트를 실행하기 전에는 사전작업으로 `initializeCityDatabase()`을 호출해야 하고, 테스트가 끝난 후에는 후속 작업으로 `clearCityDatabase()`를 호출해야 합니다. 이런 경우엔 다음처럼 코드를 짤 수 있습니다.

```jsx
beforeEach(() => {
  initializeCityDatabase();
});

afterEach(() => {
  clearCityDatabase();
});

test("도시 데이터베이스에는 Vienna가 포함되어 있습니다", () => {
  expect(isCity("Vienna")).toBeTruthy();
});

test("도시 데이터베이스에는 San Juan이 포함되어 있습니다", () => {
  expect(isCity("San Juan")).toBeTruthy();
});
```

`beforeEach`와 `afterEach`는 [비동기 코드를 테스트하는 방법]에서 논했던 것과 동일한 방식으로 비동기 코드를 다룰 수 있습니다. `done` 파라미터를 받거나 Promise 를 리턴하는 것이죠. 예를 들어, 데이터 초기화 시에 resolve 되는 Promise 를 `initializeCityDatabase()`가 리턴하는 상황이라면, 다음처럼 해당 Promise 를 리턴해주면 됩니다.

```jsx
beforeEach(() => {
  return initializeCityDatabase();
});
```

## One-Time Setup
